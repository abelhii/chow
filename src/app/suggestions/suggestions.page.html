<ion-header>
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-back-button defaultHref="home"></ion-back-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>

<ion-content fullscreen>
	<!--Google-->

	<div *ngIf="suggestionsList.length > 0">
		<ion-card class="suggestion-card" *ngIf="randomPlace" target="_blank" (click)="_googleApiService.openInMaps(randomPlace)">
			<chow-image imgSource="{{_googleApiService.getPlacePhotoUrl(randomPlace.photos, true)}}"></chow-image>
			<!-- <div style="position: relative;">
				<img class="suggestion-image" [class.no-image]="_googleApiService.getPlacePhotoUrl(randomPlace.photos, true) == 'https://source.unsplash.com/random/?chow'" src="{{_googleApiService.getPlacePhotoUrl(randomPlace.photos, true)}}">
				<span class="no-image-text" *ngIf="_googleApiService.getPlacePhotoUrl(randomPlace.photos, true) == 'https://source.unsplash.com/random/?chow'">
					Couldn't find an image
				</span>
			</div> -->
			<ion-card-header>
				<ion-card-title>
					<div>
						{{randomPlace.name}}
						<img src="{{randomPlace.icon}}" height="20px">
					</div>
				</ion-card-title>
				<ion-card-subtitle>
					{{randomPlace.vicinity}}
				</ion-card-subtitle>
			</ion-card-header>
		</ion-card>

		<ion-item lines="none" class="ion-text-center ion-text-capitalize">
			<ion-label>
				Don't like your choice? Search again
			</ion-label>
		</ion-item>

		<ion-item lines="none">
			<ion-button size="large" (click)="getRandomPlace()" style="margin: auto;">
				<ion-icon slot="icon-only" name="search"></ion-icon>
			</ion-button>
		</ion-item>

		<ion-item lines="full" class="ion-text-center ion-text-capitalize">
			<ion-label>
				Or swipe below for more
			</ion-label>
		</ion-item>

		<ion-slides scrollbar="true" [options]="slideOptions">
			<ion-slide *ngFor="let place of suggestionsList; let i=index">
				<ion-card class="suggestion-card" (click)="_googleApiService.openInMaps(place)">
					<chow-image imgSource="{{_googleApiService.getPlacePhotoUrl(place.photos, true)}}"></chow-image>
					<!-- <img class="suggestion-image" src="{{_googleApiService.getPlacePhotoUrl(place.photos, true)}}"> -->
					<ion-card-header>
						<ion-card-title>
							<div>
								{{place.name}}
							</div>
						</ion-card-title>
						<ion-card-subtitle>
							{{place.vicinity}}
						</ion-card-subtitle>
					</ion-card-header>
				</ion-card>
			</ion-slide>
		</ion-slides>
	</div>

	<!--Nominatim-->

	<div *ngIf="suggestionsNominatimList.length > 0">
		<ion-card *ngIf="randomNominatimPlace">
			<ion-card-header>
				<ion-card-title>
					<div style="display:grid; grid-template-columns:10fr 1fr">
						{{randomNominatimPlace.address[randomNominatimPlace.type]}}
						<img src="{{randomNominatimPlace.icon}}" height="20px">
					</div>
				</ion-card-title>
				<ion-card-subtitle>
					{{randomNominatimPlace.address.road}}, <br>
					{{randomNominatimPlace.address.postcode}}, <br>
					{{randomNominatimPlace.address.city}}, <br>
					{{randomNominatimPlace.address.state}}, <br>
					{{randomNominatimPlace.address.country}}
				</ion-card-subtitle>
			</ion-card-header>
		</ion-card>

		<ion-card *ngFor="let place of suggestionsList; let i = index" [routerLink]="['details', place.id]">
			<ion-card-header>
				<ion-card-title>
					<div style="display:grid; grid-template-columns:10fr 1fr">
						{{place.address[place.type]}}
						<img src="{{place.icon}}" height="20px">
					</div>
				</ion-card-title>
				<ion-card-subtitle>
					{{place.address.road}}, <br>
					{{place.address.postcode}}, <br>
					{{place.address.city}}, <br>
					{{place.address.state}}, <br>
					{{place.address.country}}
				</ion-card-subtitle>
			</ion-card-header>
		</ion-card>
	</div>
</ion-content>